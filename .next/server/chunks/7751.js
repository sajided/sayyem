"use strict";exports.id=7751,exports.ids=[7751],exports.modules={57751:(a,b,c)=>{c.r(b),c.d(b,{default:()=>g});var d=c(56037),e=c.n(d);let f=new d.Schema({_preorderWebhookSent:{type:Boolean,default:!1},isPreOrder:{type:Boolean,default:!1},preOrderAdvancePercent:{type:Number,default:null},preOrderAdvanceAmount:{type:Number,default:0},preOrderBalanceDue:{type:Number,default:0},preOrderAdvancePaid:{type:Boolean,default:!1},preOrderAdvancePaidAt:{type:Date,default:null},preOrderBalancePaid:{type:Boolean,default:!1},preOrderBalancePaidAt:{type:Date,default:null},phone:{type:String,email:{type:String},required:!0,index:!0},name:{type:String},address:{type:String},city:{type:String,default:"Dhaka"},delivery:{type:String,enum:["inside","outside"],default:"inside"},payment:{type:String,default:"cod"},note:{type:String},coupon:{type:Object,default:null},subtotal:{type:Number,default:0},deliveryFee:{type:Number,default:0},discount:{type:Number,default:0},giftWrap:{type:Boolean,default:!1},giftWrapFee:{type:Number,default:0},total:{type:Number,default:0},items:[{productId:{type:d.Schema.Types.ObjectId,ref:"Product"},name:String,price:Number,qty:Number,slug:String,image:String}],statusHistory:[{status:String,at:{type:Date,default:Date.now}}],currentStatus:{type:String,default:"Placed"},isPreOrder:{type:Boolean,default:!1},preOrderAdvancePercent:{type:Number,default:0},advanceAmount:{type:Number,default:0},dueOnDelivery:{type:Number,default:0},preOrderNote:{type:String,default:""},paymentHoldUntil:{type:Date,index:{expires:0},default:void 0},senderNumber:{type:String,default:""},paymentMethod:{type:String,default:""},transactionId:{type:String,default:""},uddoktaInvoiceId:{type:String,default:""},paymentProvider:{type:String,default:""},bkashPaymentID:{type:String,default:""},bkashTrxID:{type:String,default:""},paymentStatus:{type:String,enum:["pending","paid","cancelled"],default:"pending"},isPreOrder:{type:Boolean,default:!1},preOrderAdvancePercent:{type:Number,default:0},advanceAmount:{type:Number,default:0},dueOnDelivery:{type:Number,default:0},preOrderNote:{type:String,default:""},paymentHoldUntil:{type:Date,index:{expires:0},default:void 0},senderNumber:{type:String,default:""},paymentMethod:{type:String,default:""},transactionId:{type:String,default:""},uddoktaInvoiceId:{type:String,default:""},paymentProvider:{type:String,default:""}},{timestamps:!0});f.post("save",async function(a){try{if(a?.isPreOrder&&!a._preorderWebhookSent){let{sendPreorderCreated:b}=await c.e(6816).then(c.bind(c,36816));b(a.toObject()).catch(()=>{});try{let b=await Promise.resolve().then(c.t.bind(c,56037,23)),d=b.default||b;await d.connection.collection("orders").updateOne({_id:a._id},{$set:{_preorderWebhookSent:!0}})}catch{}}}catch(a){console.error("preorder webhook hook error",a)}});let g=e().models.Order||e().model("Order",f)}};