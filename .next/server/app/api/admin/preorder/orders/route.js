/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/preorder/orders/route";
exports.ids = ["app/api/admin/preorder/orders/route"];
exports.modules = {

/***/ "(rsc)/./app/api/admin/preorder/orders/route.js":
/*!************************************************!*\
  !*** ./app/api/admin/preorder/orders/route.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   fetchCache: () => (/* binding */ fetchCache),\n/* harmony export */   revalidate: () => (/* binding */ revalidate)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../lib/db */ \"(rsc)/./lib/db.js\");\nconst dynamic = 'force-dynamic';\nconst revalidate = 0;\nconst fetchCache = 'force-no-store';\n\n\n// --- helpers ----------------------------------------------------\nasync function ensureDB() {\n    await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.dbConnect)();\n}\nasync function loadOrderModel() {\n    const m = await __webpack_require__.e(/*! import() */ \"_rsc_models_Order_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../../../../../models/Order.js */ \"(rsc)/./models/Order.js\")).catch(()=>__webpack_require__.e(/*! import() */ \"_rsc_models_Order_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../../../../../models/Order */ \"(rsc)/./models/Order.js\")));\n    return m.default || m.Order || m;\n}\nasync function loadProductModel() {\n    const m = await __webpack_require__.e(/*! import() */ \"_rsc_models_Product_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../../../../../models/Product.js */ \"(rsc)/./models/Product.js\")).catch(()=>__webpack_require__.e(/*! import() */ \"_rsc_models_Product_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../../../../../models/Product */ \"(rsc)/./models/Product.js\")));\n    return m?.default || m?.Product || m;\n}\nfunction findInvoiceId(o) {\n    const tryVals = [];\n    if (o?.invoiceId) tryVals.push(o.invoiceId);\n    if (o?.invoice_id) tryVals.push(o.invoice_id);\n    if (o?.payment?.invoice_id) tryVals.push(o.payment.invoice_id);\n    if (o?.uddokta?.invoice_id) tryVals.push(o.uddokta.invoice_id);\n    if (o?.metadata?.invoice_id) tryVals.push(o.metadata.invoice_id);\n    if (o?.metadata?.invoiceId) tryVals.push(o.metadata.invoiceId);\n    if (Array.isArray(o?.payments)) for (const p of o.payments){\n        if (p?.invoice_id) tryVals.push(p.invoice_id);\n        if (p?.metadata?.invoice_id) tryVals.push(p.metadata.invoice_id);\n    }\n    if (Array.isArray(o?.transactions)) for (const p of o.transactions){\n        if (p?.invoice_id) tryVals.push(p.invoice_id);\n        if (p?.metadata?.invoice_id) tryVals.push(p.metadata.invoice_id);\n    }\n    return tryVals.find((v)=>typeof v === 'string' && v.trim().length >= 6) || null;\n}\nasync function verifyUddokta(invoiceId) {\n    try {\n        const base = process.env.UDDOKTAPAY_BASE || \"https://sandbox.uddoktapay.com\";\n        const key = process.env.UDDOKTAPAY_API_KEY || process.env.UDDOKTAPAY_SANDBOX_API_KEY;\n        if (!key) return null;\n        const url = base.replace(/\\/$/, \"\") + \"/api/verify-payment\";\n        const res = await fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"accept\": \"application/json\",\n                \"content-type\": \"application/json\",\n                \"RT-UDDOKTAPAY-API-KEY\": key\n            },\n            body: JSON.stringify({\n                invoice_id: invoiceId\n            })\n        });\n        if (!res.ok) return null;\n        const j = await res.json();\n        return j;\n    } catch (e) {\n        return null;\n    }\n}\nfunction deriveProductMeta(o) {\n    const it = Array.isArray(o.items) && o.items[0] ? o.items[0] : null;\n    return {\n        productTitle: o.productTitle || it?.title || it?.name || o.slug || \"\",\n        productImage: o.productImage || it?.image || it?.images && it.images[0] || \"\",\n        slug: o.slug || it?.slug || \"\",\n        productId: o.productId || it?.productId || it?._id || null\n    };\n}\nfunction computeTotals(o) {\n    const toNum = (v)=>{\n        const n = Number(v);\n        return Number.isFinite(n) ? n : 0;\n    };\n    // Deep scan for amounts inside an object (used as last-resort)\n    function collectAmountsDeep(obj) {\n        const found = [];\n        const seen = new Set();\n        function walk(x) {\n            if (!x || typeof x !== \"object\" || seen.has(x)) return;\n            seen.add(x);\n            for (const [k, v] of Object.entries(x)){\n                if (v && typeof v === \"object\") walk(v);\n                else {\n                    const key = String(k).toLowerCase();\n                    if (key.includes(\"amount\") || key.includes(\"paid\")) {\n                        const n = toNum(v);\n                        if (n > 0) found.push(n);\n                    }\n                }\n            }\n        }\n        walk(obj);\n        return found;\n    }\n    // 1) Compute TOTAL robustly\n    let itemsSubtotal = 0;\n    if (Array.isArray(o.items)) {\n        for (const it of o.items){\n            const price = toNum(it?.price ?? it?.unitPrice ?? it?.amount ?? 0);\n            const qty = toNum(it?.qty ?? it?.quantity ?? 1) || 1;\n            itemsSubtotal += price * qty;\n        }\n    }\n    const delivery = toNum(o?.deliveryFee ?? o?.shippingFee ?? o?.deliveryCharge ?? 0);\n    let total = toNum(o?.total ?? o?.grandTotal ?? o?.amount ?? 0) || itemsSubtotal + delivery;\n    // 2) Sum PAID\n    let paid = 0;\n    // 2a) Array-based payments/transactions\n    const txs = Array.isArray(o?.transactions) ? o?.transactions : o?.payments;\n    if (Array.isArray(txs)) {\n        for (const t of txs){\n            // Normalize a wide range of \"good\" statuses (case-insensitive + numeric flags)\n            const raw = (t?.status ?? t?.state ?? t?.payment_status ?? t?.paid_status ?? t?.result ?? \"\").toString().trim();\n            const status = raw.toUpperCase();\n            const okStatus = !status || [\n                \"OK\",\n                \"DONE\",\n                \"CAPTURED\",\n                \"CONFIRMED\",\n                \"APPROVED\",\n                \"SUCCESS\",\n                \"SUCCESSFUL\",\n                \"PAID\",\n                \"COMPLETED\",\n                \"PROCESSING\"\n            ].includes(status) || t?.success === true || t?.paid === true || t?.status_code === 200 || t?.code === 200 || t?.ok === true;\n            const badStatus = [\n                \"FAILED\",\n                \"CANCELLED\",\n                \"CANCELED\",\n                \"REFUNDED\",\n                \"VOID\",\n                \"ERROR\",\n                \"DECLINED\"\n            ].includes(status);\n            // Preferred explicit fields\n            const candidates = [\n                t?.amount,\n                t?.charged_amount,\n                t?.paid,\n                t?.paid_amount,\n                t?.amount_captured,\n                t?.capture_amount,\n                t?.advance,\n                t?.advance_paid,\n                t?.advanceAmount,\n                t?.advance_amount,\n                t?.trx_amount,\n                t?.transaction_amount\n            ].map(toNum).filter((n)=>n > 0);\n            // Nested gateway response\n            if (t?.gateway_response && typeof t.gateway_response === \"object\") {\n                const nested = collectAmountsDeep(t.gateway_response);\n                candidates.push(...nested);\n            }\n            // Generic deep scan of the tx (last resort)\n            if (candidates.length === 0) {\n                const deep = collectAmountsDeep(t);\n                candidates.push(...deep);\n            }\n            // Type heuristic for advance\n            const typeStr = (t?.type || t?.kind || t?.note || \"\").toString().toLowerCase();\n            const isAdvance = typeStr.includes(\"advance\") || typeStr.includes(\"pre\");\n            const amt = candidates.length ? Math.max(...candidates) : 0;\n            if (amt > 0 && (okStatus && !badStatus || isAdvance)) {\n                paid += amt;\n            }\n        }\n    }\n    // 2b) Top-level fallbacks\n    const toppers = [\n        o?.paid,\n        o?.advance,\n        o?.advancePaid,\n        o?.advance_amount,\n        o?.advanceAmount,\n        o?.prepaid,\n        o?.prepaidAmount\n    ].map(toNum).filter((n)=>n > 0);\n    if (toppers.length) {\n        const topAmt = Math.max(...toppers);\n        if (paid < topAmt) paid = topAmt;\n    }\n    // 2c) Absolute last-resort: scan the whole order for \"amount\"/\"paid\" numbers\n    if (paid <= 0) {\n        const deepAll = collectAmountsDeep(o);\n        if (deepAll.length) paid = Math.max(...deepAll);\n    }\n    if (total > 0 && paid > total) paid = total;\n    const due = Math.max(0, total - paid);\n    return {\n        paid,\n        total,\n        due\n    };\n}\n// --- API: GET (list paid pre-orders) ----------------------------\n/*__OLD__*/ // --- Single canonical GET for admin preorder orders ---\nasync function GET(req) {\n    const { NextResponse } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\"));\n    try {\n        const url = new URL(req.url);\n        const debug = url.searchParams.get('debug') === '1';\n        await ensureDB();\n        const Order = await loadOrderModel();\n        // Pull all orders (preorders and regular); UI can filter if needed\n        const docs = await Order.find({}).sort({\n            createdAt: -1\n        }).lean();\n        const list = docs.map((o)=>{\n            const raw = o;\n            const po = o.preorder || {};\n            // amounts\n            const advanceDue = Number(o.advanceAmount || 0) || Number(po.advanceDue || 0) || Number(o.preOrderAdvanceAmount || 0) || (o.preOrderAdvancePercent != null ? Math.round((Number(o.total || 0) || 0) * Number(o.preOrderAdvancePercent || 0) / 100) : 0);\n            const advancePaid = Number(po.advancePaid || 0) || Number(o.paid || 0) || (o.preOrderAdvancePaid ? advanceDue || Number(o.preOrderAdvanceAmount || 0) || 0 : 0);\n            // invoice id from multiple places\n            const paymentsArr = Array.isArray(o.payments) ? o.payments : [];\n            const payment0 = paymentsArr[0] || {};\n            const invoiceId = po.uddoktaInvoiceId || o.uddoktaInvoiceId || payment0.invoiceId || o.payment && o.payment.invoice_id || o.metadata && o.metadata.invoice_id || null;\n            // uddokta status\n            const uddoktaStatus = o.uddoktaStatus || (typeof o.paymentStatus === 'string' ? o.paymentStatus.toUpperCase() : null) || (payment0.status ? String(payment0.status).toUpperCase() : null) || (o.preOrderAdvancePaid ? 'PAID' : 'PENDING') || 'PENDING';\n            const paid = advancePaid > 0 || uddoktaStatus === 'PAID' || uddoktaStatus === 'COMPLETED';\n            // normalize address: may be string or object\n            let address = null;\n            if (o.address && typeof o.address === 'object') address = o.address;\n            else if (o.address && typeof o.address === 'string') address = {\n                address: o.address,\n                city: o.city || null\n            };\n            else address = {\n                address: o.address || null,\n                city: o.city || null\n            };\n            // customer\n            const customer = o.customer || {\n                name: o.name || null,\n                phone: o.phone || null,\n                email: o.email || null,\n                address: typeof o.address === 'string' ? o.address : undefined,\n                city: o.city || undefined\n            };\n            // items\n            const items = Array.isArray(o.items) ? o.items.map((it)=>({\n                    name: it.name || it.title || it.slug || '—',\n                    slug: it.slug || null,\n                    qty: Number(it.qty || 0),\n                    price: Number(it.price || 0)\n                })) : [];\n            return {\n                id: String(o._id),\n                createdAt: o.createdAt,\n                customer,\n                address,\n                items,\n                itemsCount: items.length,\n                subtotal: Number(o.subtotal || 0),\n                deliveryFee: Number(o.deliveryFee || 0),\n                total: Number(o.total || 0),\n                advanceDue: Number(advanceDue || 0),\n                advancePaid: Number(advancePaid || 0),\n                dueOnDelivery: Number(o.dueOnDelivery || Math.max(0, Number(o.total || 0) - Number(advancePaid || 0))),\n                verified: Boolean(po.verified || o.preOrderAdvancePaid || paid),\n                paid,\n                uddoktaStatus,\n                invoiceId,\n                provider: payment0.provider || o.paymentProvider || null,\n                paymentMethod: o.paymentMethod || payment0.method || o.payment || null,\n                transactionId: o.transactionId || payment0.transaction_id || null,\n                currentStatus: o.currentStatus || o.status || null,\n                statusHistory: Array.isArray(o.statusHistory) ? o.statusHistory : [],\n                ...debug ? {\n                    raw\n                } : {}\n            };\n        });\n        return NextResponse.json({\n            ok: true,\n            orders: list\n        });\n    } catch (err) {\n        console.error('admin preorder orders GET (single) failed', err);\n        return NextResponse.json({\n            ok: false,\n            error: String(err?.message || err)\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FkbWluL3ByZW9yZGVyL29yZGVycy9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBTyxNQUFNQSxVQUFVLGdCQUFnQjtBQUNoQyxNQUFNQyxhQUFhLEVBQUU7QUFDckIsTUFBTUMsYUFBYSxpQkFBaUI7QUFDQTtBQUNPO0FBQ2xELG1FQUFtRTtBQUNuRSxlQUFlRztJQUFZLE1BQU1ELGtEQUFTQTtBQUFJO0FBQzlDLGVBQWVFO0lBQ2IsTUFBTUMsSUFBSSxNQUFNLGtMQUF3QyxDQUFDQyxLQUFLLENBQUMsSUFBTSwrS0FBcUM7SUFDMUcsT0FBT0QsRUFBRUUsT0FBTyxJQUFJRixFQUFFRyxLQUFLLElBQUlIO0FBQ2pDO0FBQ0EsZUFBZUk7SUFDYixNQUFNSixJQUFJLE1BQU0sd0xBQTBDLENBQUNDLEtBQUssQ0FBQyxJQUFNLHFMQUF1QztJQUM5RyxPQUFPRCxHQUFHRSxXQUFXRixHQUFHSyxXQUFXTDtBQUNyQztBQUNBLFNBQVNNLGNBQWNDLENBQUM7SUFDdEIsTUFBTUMsVUFBVSxFQUFFO0lBQ2xCLElBQUlELEdBQUdFLFdBQVdELFFBQVFFLElBQUksQ0FBQ0gsRUFBRUUsU0FBUztJQUMxQyxJQUFJRixHQUFHSSxZQUFZSCxRQUFRRSxJQUFJLENBQUNILEVBQUVJLFVBQVU7SUFDNUMsSUFBSUosR0FBR0ssU0FBU0QsWUFBWUgsUUFBUUUsSUFBSSxDQUFDSCxFQUFFSyxPQUFPLENBQUNELFVBQVU7SUFDN0QsSUFBSUosR0FBR00sU0FBU0YsWUFBWUgsUUFBUUUsSUFBSSxDQUFDSCxFQUFFTSxPQUFPLENBQUNGLFVBQVU7SUFDN0QsSUFBSUosR0FBR08sVUFBVUgsWUFBWUgsUUFBUUUsSUFBSSxDQUFDSCxFQUFFTyxRQUFRLENBQUNILFVBQVU7SUFDL0QsSUFBSUosR0FBR08sVUFBVUwsV0FBV0QsUUFBUUUsSUFBSSxDQUFDSCxFQUFFTyxRQUFRLENBQUNMLFNBQVM7SUFDN0QsSUFBSU0sTUFBTUMsT0FBTyxDQUFDVCxH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SWhFO2dCQUMxREE7Z0JBQ0FvRTtnQkFDQXBKO2dCQUNBa0ssVUFBVWhCLFNBQVNnQixRQUFRLElBQUlwSyxFQUFFcUssZUFBZSxJQUFJO2dCQUNwREMsZUFBZXRLLEVBQUVzSyxhQUFhLElBQUlsQixTQUFTdkgsTUFBTSxJQUFJN0IsRUFBRUssT0FBTyxJQUFJO2dCQUNsRWtLLGVBQWV2SyxFQUFFdUssYUFBYSxJQUFJbkIsU0FBU29CLGNBQWMsSUFBSTtnQkFDN0RDLGVBQWV6SyxFQUFFeUssYUFBYSxJQUFJekssRUFBRXNGLE1BQU0sSUFBSTtnQkFDOUNvRixlQUFlbEssTUFBTUMsT0FBTyxDQUFDVCxFQUFFMEssYUFBYSxJQUFJMUssRUFBRTBLLGFBQWEsR0FBRyxFQUFFO2dCQUNwRSxHQUFJdEMsUUFBUTtvQkFBRS9DO2dCQUFJLElBQUksQ0FBQyxDQUFDO1lBQzFCO1FBQ0Y7UUFDQSxPQUFPaEcsYUFBYStDLElBQUksQ0FBQztZQUFFRixJQUFJO1lBQU15SSxRQUFRaEM7UUFBSztJQUNwRCxFQUFDLE9BQU1pQyxLQUFJO1FBQ1RDLFFBQVFDLEtBQUssQ0FBQyw2Q0FBNkNGO1FBQzNELE9BQU92TCxhQUFhK0MsSUFBSSxDQUFDO1lBQUVGLElBQUc7WUFBTzRJLE9BQU8zRyxPQUFPeUcsS0FBS0csV0FBV0g7UUFBSyxHQUFHO1lBQUV0RixRQUFRO1FBQUk7SUFDM0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3Jvd3Nob24vRGVza3RvcC9Ub3lSdXNoQkRfcHJlb3JkZXJfdmVyaWZ5X3BhdGNoX3YxNV9hZG1pbl9wcmVvcmRlcl91cGdyYWRlc192MTUvYXBwL2FwaS9hZG1pbi9wcmVvcmRlci9vcmRlcnMvcm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5leHBvcnQgY29uc3QgcmV2YWxpZGF0ZSA9IDA7XG5leHBvcnQgY29uc3QgZmV0Y2hDYWNoZSA9ICdmb3JjZS1uby1zdG9yZSc7XG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGRiQ29ubmVjdCB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9saWIvZGJcIjtcbi8vIC0tLSBoZWxwZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZURCKCl7IGF3YWl0IGRiQ29ubmVjdCgpOyB9XG5hc3luYyBmdW5jdGlvbiBsb2FkT3JkZXJNb2RlbCgpIHtcbiAgY29uc3QgbSA9IGF3YWl0IGltcG9ydChcIi4uLy4uLy4uLy4uLy4uL21vZGVscy9PcmRlci5qc1wiKS5jYXRjaCgoKSA9PiBpbXBvcnQoXCIuLi8uLi8uLi8uLi8uLi9tb2RlbHMvT3JkZXJcIikpO1xuICByZXR1cm4gbS5kZWZhdWx0IHx8IG0uT3JkZXIgfHwgbTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGxvYWRQcm9kdWN0TW9kZWwoKSB7XG4gIGNvbnN0IG0gPSBhd2FpdCBpbXBvcnQoXCIuLi8uLi8uLi8uLi8uLi9tb2RlbHMvUHJvZHVjdC5qc1wiKS5jYXRjaCgoKSA9PiBpbXBvcnQoXCIuLi8uLi8uLi8uLi8uLi9tb2RlbHMvUHJvZHVjdFwiKSk7XG4gIHJldHVybiBtPy5kZWZhdWx0IHx8IG0/LlByb2R1Y3QgfHwgbTtcbn1cbmZ1bmN0aW9uIGZpbmRJbnZvaWNlSWQobyl7XG4gIGNvbnN0IHRyeVZhbHMgPSBbXTtcbiAgaWYgKG8/Lmludm9pY2VJZCkgdHJ5VmFscy5wdXNoKG8uaW52b2ljZUlkKTtcbiAgaWYgKG8/Lmludm9pY2VfaWQpIHRyeVZhbHMucHVzaChvLmludm9pY2VfaWQpO1xuICBpZiAobz8ucGF5bWVudD8uaW52b2ljZV9pZCkgdHJ5VmFscy5wdXNoKG8ucGF5bWVudC5pbnZvaWNlX2lkKTtcbiAgaWYgKG8/LnVkZG9rdGE/Lmludm9pY2VfaWQpIHRyeVZhbHMucHVzaChvLnVkZG9rdGEuaW52b2ljZV9pZCk7XG4gIGlmIChvPy5tZXRhZGF0YT8uaW52b2ljZV9pZCkgdHJ5VmFscy5wdXNoKG8ubWV0YWRhdGEuaW52b2ljZV9pZCk7XG4gIGlmIChvPy5tZXRhZGF0YT8uaW52b2ljZUlkKSB0cnlWYWxzLnB1c2goby5tZXRhZGF0YS5pbnZvaWNlSWQpO1xuICBpZiAoQXJyYXkuaXNBcnJheShvPy5wYXltZW50cykpIGZvciAoY29uc3QgcCBvZiBvLnBheW1lbnRzKXsgaWYgKHA/Lmludm9pY2VfaWQpIHRyeVZhbHMucHVzaChwLmludm9pY2VfaWQpOyBpZiAocD8ubWV0YWRhdGE/Lmludm9pY2VfaWQpIHRyeVZhbHMucHVzaChwLm1ldGFkYXRhLmludm9pY2VfaWQpOyB9XG4gIGlmIChBcnJheS5pc0FycmF5KG8/LnRyYW5zYWN0aW9ucykpIGZvciAoY29uc3QgcCBvZiBvLnRyYW5zYWN0aW9ucyl7IGlmIChwPy5pbnZvaWNlX2lkKSB0cnlWYWxzLnB1c2gocC5pbnZvaWNlX2lkKTsgaWYgKHA/Lm1ldGFkYXRhPy5pbnZvaWNlX2lkKSB0cnlWYWxzLnB1c2gocC5tZXRhZGF0YS5pbnZvaWNlX2lkKTsgfVxuICByZXR1cm4gKHRyeVZhbHMuZmluZCh2ID0+IHR5cGVvZiB2ID09PSAnc3RyaW5nJyAmJiB2LnRyaW0oKS5sZW5ndGggPj0gNikgfHwgbnVsbCk7XG59XG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlVZGRva3RhKGludm9pY2VJZCl7XG4gIHRyeXtcbiAgICBjb25zdCBiYXNlID0gcHJvY2Vzcy5lbnYuVURET0tUQVBBWV9CQVNFIHx8IFwiaHR0cHM6Ly9zYW5kYm94LnVkZG9rdGFwYXkuY29tXCI7XG4gICAgY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuVURET0tUQVBBWV9BUElfS0VZIHx8IHByb2Nlc3MuZW52LlVERE9LVEFQQVlfU0FOREJPWF9BUElfS0VZO1xuICAgIGlmKCFrZXkpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHVybCA9IGJhc2UucmVwbGFjZSgvXFwvJC8sIFwiXCIpICsgXCIvYXBpL3ZlcmlmeS1wYXltZW50XCI7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiUlQtVURET0tUQVBBWS1BUEktS0VZXCI6IGtleVxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaW52b2ljZV9pZDogaW52b2ljZUlkIH0pXG4gICAgfSk7XG4gICAgaWYoIXJlcy5vaykgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgaiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIGo7XG4gIH1jYXRjaChlKXtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24gZGVyaXZlUHJvZHVjdE1ldGEobykge1xuICBjb25zdCBpdCA9IEFycmF5LmlzQXJyYXkoby5pdGVtcykgJiYgby5pdGVtc1swXSA/IG8uaXRlbXNbMF0gOiBudWxsO1xuICByZXR1cm4ge1xuICAgIHByb2R1Y3RUaXRsZTogby5wcm9kdWN0VGl0bGUgfHwgaXQ/LnRpdGxlIHx8IGl0Py5uYW1lIHx8IG8uc2x1ZyB8fCBcIlwiLFxuICAgIHByb2R1Y3RJbWFnZTogby5wcm9kdWN0SW1hZ2UgfHwgaXQ/LmltYWdlIHx8IChpdD8uaW1hZ2VzICYmIGl0LmltYWdlc1swXSkgfHwgXCJcIixcbiAgICBzbHVnOiBvLnNsdWcgfHwgaXQ/LnNsdWcgfHwgXCJcIixcbiAgICBwcm9kdWN0SWQ6IG8ucHJvZHVjdElkIHx8IGl0Py5wcm9kdWN0SWQgfHwgaXQ/Ll9pZCB8fCBudWxsLFxuICB9O1xufVxuZnVuY3Rpb24gY29tcHV0ZVRvdGFscyhvKSB7XG4gIGNvbnN0IHRvTnVtID0gKHYpID0+IHtcbiAgICBjb25zdCBuID0gTnVtYmVyKHYpO1xuICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobikgPyBuIDogMDtcbiAgfTtcbiAgLy8gRGVlcCBzY2FuIGZvciBhbW91bnRzIGluc2lkZSBhbiBvYmplY3QgKHVzZWQgYXMgbGFzdC1yZXNvcnQpXG4gIGZ1bmN0aW9uIGNvbGxlY3RBbW91bnRzRGVlcChvYmopIHtcbiAgICBjb25zdCBmb3VuZCA9IFtdO1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0KCk7XG4gICAgZnVuY3Rpb24gd2Fsayh4KSB7XG4gICAgICBpZiAoIXggfHwgdHlwZW9mIHggIT09IFwib2JqZWN0XCIgfHwgc2Vlbi5oYXMoeCkpIHJldHVybjtcbiAgICAgIHNlZW4uYWRkKHgpO1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoeCkpIHtcbiAgICAgICAgaWYgKHYgJiYgdHlwZW9mIHYgPT09IFwib2JqZWN0XCIpIHdhbGsodik7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGtleSA9IFN0cmluZyhrKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGlmIChrZXkuaW5jbHVkZXMoXCJhbW91bnRcIikgfHwga2V5LmluY2x1ZGVzKFwicGFpZFwiKSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRvTnVtKHYpO1xuICAgICAgICAgICAgaWYgKG4gPiAwKSBmb3VuZC5wdXNoKG4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB3YWxrKG9iaik7XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG4gIC8vIDEpIENvbXB1dGUgVE9UQUwgcm9idXN0bHlcbiAgbGV0IGl0ZW1zU3VidG90YWwgPSAwO1xuICBpZiAoQXJyYXkuaXNBcnJheShvLml0ZW1zKSkge1xuICAgIGZvciAoY29uc3QgaXQgb2Ygby5pdGVtcykge1xuICAgICAgY29uc3QgcHJpY2UgPSB0b051bShpdD8ucHJpY2UgPz8gaXQ/LnVuaXRQcmljZSA/PyBpdD8uYW1vdW50ID8/IDApO1xuICAgICAgY29uc3QgcXR5ID0gdG9OdW0oaXQ/LnF0eSA/PyBpdD8ucXVhbnRpdHkgPz8gMSkgfHwgMTtcbiAgICAgIGl0ZW1zU3VidG90YWwgKz0gcHJpY2UgKiBxdHk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGRlbGl2ZXJ5ID0gdG9OdW0obz8uZGVsaXZlcnlGZWUgPz8gbz8uc2hpcHBpbmdGZWUgPz8gbz8uZGVsaXZlcnlDaGFyZ2UgPz8gMCk7XG4gIGxldCB0b3RhbCA9XG4gICAgdG9OdW0obz8udG90YWwgPz8gbz8uZ3JhbmRUb3RhbCA/PyBvPy5hbW91bnQgPz8gMCkgfHxcbiAgICAoaXRlbXNTdWJ0b3RhbCArIGRlbGl2ZXJ5KTtcbiAgLy8gMikgU3VtIFBBSURcbiAgbGV0IHBhaWQgPSAwO1xuICAvLyAyYSkgQXJyYXktYmFzZWQgcGF5bWVudHMvdHJhbnNhY3Rpb25zXG4gIGNvbnN0IHR4cyA9IEFycmF5LmlzQXJyYXkobz8udHJhbnNhY3Rpb25zKSA/IG8/LnRyYW5zYWN0aW9ucyA6IG8/LnBheW1lbnRzO1xuICBpZiAoQXJyYXkuaXNBcnJheSh0eHMpKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIHR4cykge1xuICAgICAgLy8gTm9ybWFsaXplIGEgd2lkZSByYW5nZSBvZiBcImdvb2RcIiBzdGF0dXNlcyAoY2FzZS1pbnNlbnNpdGl2ZSArIG51bWVyaWMgZmxhZ3MpXG4gICAgICBjb25zdCByYXcgPSAodD8uc3RhdHVzID8/IHQ/LnN0YXRlID8/IHQ/LnBheW1lbnRfc3RhdHVzID8/IHQ/LnBhaWRfc3RhdHVzID8/IHQ/LnJlc3VsdCA/PyBcIlwiKS50b1N0cmluZygpLnRyaW0oKTtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHJhdy50b1VwcGVyQ2FzZSgpO1xuICAgICAgY29uc3Qgb2tTdGF0dXMgPVxuICAgICAgICAhc3RhdHVzIHx8XG4gICAgICAgIFtcIk9LXCIsXCJET05FXCIsXCJDQVBUVVJFRFwiLFwiQ09ORklSTUVEXCIsXCJBUFBST1ZFRFwiLFwiU1VDQ0VTU1wiLFwiU1VDQ0VTU0ZVTFwiLFwiUEFJRFwiLFwiQ09NUExFVEVEXCIsXCJQUk9DRVNTSU5HXCJdLmluY2x1ZGVzKHN0YXR1cykgfHxcbiAgICAgICAgdD8uc3VjY2VzcyA9PT0gdHJ1ZSB8fCB0Py5wYWlkID09PSB0cnVlIHx8IHQ/LnN0YXR1c19jb2RlID09PSAyMDAgfHwgdD8uY29kZSA9PT0gMjAwIHx8IHQ/Lm9rID09PSB0cnVlO1xuICAgICAgY29uc3QgYmFkU3RhdHVzID0gW1wiRkFJTEVEXCIsXCJDQU5DRUxMRURcIixcIkNBTkNFTEVEXCIsXCJSRUZVTkRFRFwiLFwiVk9JRFwiLFwiRVJST1JcIixcIkRFQ0xJTkVEXCJdLmluY2x1ZGVzKHN0YXR1cyk7XG4gICAgICAvLyBQcmVmZXJyZWQgZXhwbGljaXQgZmllbGRzXG4gICAgICBjb25zdCBjYW5kaWRhdGVzID0gW1xuICAgICAgICB0Py5hbW91bnQsIHQ/LmNoYXJnZWRfYW1vdW50LCB0Py5wYWlkLCB0Py5wYWlkX2Ftb3VudCwgdD8uYW1vdW50X2NhcHR1cmVkLCB0Py5jYXB0dXJlX2Ftb3VudCxcbiAgICAgICAgdD8uYWR2YW5jZSwgdD8uYWR2YW5jZV9wYWlkLCB0Py5hZHZhbmNlQW1vdW50LCB0Py5hZHZhbmNlX2Ftb3VudCxcbiAgICAgICAgdD8udHJ4X2Ftb3VudCwgdD8udHJhbnNhY3Rpb25fYW1vdW50XG4gICAgICBdLm1hcCh0b051bSkuZmlsdGVyKG4gPT4gbiA+IDApO1xuICAgICAgLy8gTmVzdGVkIGdhdGV3YXkgcmVzcG9uc2VcbiAgICAgIGlmICh0Py5nYXRld2F5X3Jlc3BvbnNlICYmIHR5cGVvZiB0LmdhdGV3YXlfcmVzcG9uc2UgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc3QgbmVzdGVkID0gY29sbGVjdEFtb3VudHNEZWVwKHQuZ2F0ZXdheV9yZXNwb25zZSk7XG4gICAgICAgIGNhbmRpZGF0ZXMucHVzaCguLi5uZXN0ZWQpO1xuICAgICAgfVxuICAgICAgLy8gR2VuZXJpYyBkZWVwIHNjYW4gb2YgdGhlIHR4IChsYXN0IHJlc29ydClcbiAgICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBkZWVwID0gY29sbGVjdEFtb3VudHNEZWVwKHQpO1xuICAgICAgICBjYW5kaWRhdGVzLnB1c2goLi4uZGVlcCk7XG4gICAgICB9XG4gICAgICAvLyBUeXBlIGhldXJpc3RpYyBmb3IgYWR2YW5jZVxuICAgICAgY29uc3QgdHlwZVN0ciA9ICh0Py50eXBlIHx8IHQ/LmtpbmQgfHwgdD8ubm90ZSB8fCBcIlwiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBpc0FkdmFuY2UgPSB0eXBlU3RyLmluY2x1ZGVzKFwiYWR2YW5jZVwiKSB8fCB0eXBlU3RyLmluY2x1ZGVzKFwicHJlXCIpO1xuICAgICAgY29uc3QgYW10ID0gY2FuZGlkYXRlcy5sZW5ndGggPyBNYXRoLm1heCguLi5jYW5kaWRhdGVzKSA6IDA7XG4gICAgICBpZiAoYW10ID4gMCAmJiAoKG9rU3RhdHVzICYmICFiYWRTdGF0dXMpIHx8IGlzQWR2YW5jZSkpIHtcbiAgICAgICAgcGFpZCArPSBhbXQ7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIDJiKSBUb3AtbGV2ZWwgZmFsbGJhY2tzXG4gIGNvbnN0IHRvcHBlcnMgPSBbXG4gICAgbz8ucGFpZCwgbz8uYWR2YW5jZSwgbz8uYWR2YW5jZVBhaWQsIG8/LmFkdmFuY2VfYW1vdW50LCBvPy5hZHZhbmNlQW1vdW50LCBvPy5wcmVwYWlkLCBvPy5wcmVwYWlkQW1vdW50XG4gIF0ubWFwKHRvTnVtKS5maWx0ZXIobiA9PiBuID4gMCk7XG4gIGlmICh0b3BwZXJzLmxlbmd0aCkge1xuICAgIGNvbnN0IHRvcEFtdCA9IE1hdGgubWF4KC4uLnRvcHBlcnMpO1xuICAgIGlmIChwYWlkIDwgdG9wQW10KSBwYWlkID0gdG9wQW10O1xuICB9XG4gIC8vIDJjKSBBYnNvbHV0ZSBsYXN0LXJlc29ydDogc2NhbiB0aGUgd2hvbGUgb3JkZXIgZm9yIFwiYW1vdW50XCIvXCJwYWlkXCIgbnVtYmVyc1xuICBpZiAocGFpZCA8PSAwKSB7XG4gICAgY29uc3QgZGVlcEFsbCA9IGNvbGxlY3RBbW91bnRzRGVlcChvKTtcbiAgICBpZiAoZGVlcEFsbC5sZW5ndGgpIHBhaWQgPSBNYXRoLm1heCguLi5kZWVwQWxsKTtcbiAgfVxuICBpZiAodG90YWwgPiAwICYmIHBhaWQgPiB0b3RhbCkgcGFpZCA9IHRvdGFsO1xuICBjb25zdCBkdWUgPSBNYXRoLm1heCgwLCB0b3RhbCAtIHBhaWQpO1xuICByZXR1cm4geyBwYWlkLCB0b3RhbCwgZHVlIH07XG59XG4vLyAtLS0gQVBJOiBHRVQgKGxpc3QgcGFpZCBwcmUtb3JkZXJzKSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKl9fT0xEX18qLyBcbi8vIC0tLSBTaW5nbGUgY2Fub25pY2FsIEdFVCBmb3IgYWRtaW4gcHJlb3JkZXIgb3JkZXJzIC0tLVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXEpe1xuICBjb25zdCB7IE5leHRSZXNwb25zZSB9ID0gYXdhaXQgaW1wb3J0KCduZXh0L3NlcnZlcicpO1xuICB0cnl7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICBjb25zdCBkZWJ1ZyA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdkZWJ1ZycpID09PSAnMSc7XG4gICAgYXdhaXQgZW5zdXJlREIoKTtcbiAgICBjb25zdCBPcmRlciA9IGF3YWl0IGxvYWRPcmRlck1vZGVsKCk7XG4gICAgLy8gUHVsbCBhbGwgb3JkZXJzIChwcmVvcmRlcnMgYW5kIHJlZ3VsYXIpOyBVSSBjYW4gZmlsdGVyIGlmIG5lZWRlZFxuICAgIGNvbnN0IGRvY3MgPSBhd2FpdCBPcmRlci5maW5kKHt9KS5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KS5sZWFuKCk7XG4gICAgY29uc3QgbGlzdCA9IGRvY3MubWFwKChvKSA9PiB7XG4gICAgICBjb25zdCByYXcgPSBvO1xuICAgICAgY29uc3QgcG8gPSBvLnByZW9yZGVyIHx8IHt9O1xuICAgICAgLy8gYW1vdW50c1xuICAgICAgY29uc3QgYWR2YW5jZUR1ZSA9XG4gICAgICAgIE51bWJlcihvLmFkdmFuY2VBbW91bnQgfHwgMCkgfHxcbiAgICAgICAgTnVtYmVyKHBvLmFkdmFuY2VEdWUgfHwgMCkgfHxcbiAgICAgICAgTnVtYmVyKG8ucHJlT3JkZXJBZHZhbmNlQW1vdW50IHx8IDApIHx8XG4gICAgICAgIChvLnByZU9yZGVyQWR2YW5jZVBlcmNlbnQgIT0gbnVsbFxuICAgICAgICAgID8gTWF0aC5yb3VuZCgoKE51bWJlcihvLnRvdGFsIHx8IDApIHx8IDApICogTnVtYmVyKG8ucHJlT3JkZXJBZHZhbmNlUGVyY2VudCB8fCAwKSkgLyAxMDApXG4gICAgICAgICAgOiAwKTtcbiAgICAgIGNvbnN0IGFkdmFuY2VQYWlkID1cbiAgICAgICAgTnVtYmVyKHBvLmFkdmFuY2VQYWlkIHx8IDApIHx8XG4gICAgICAgIE51bWJlcihvLnBhaWQgfHwgMCkgfHxcbiAgICAgICAgKG8ucHJlT3JkZXJBZHZhbmNlUGFpZCA/IChhZHZhbmNlRHVlIHx8IE51bWJlcihvLnByZU9yZGVyQWR2YW5jZUFtb3VudCB8fCAwKSB8fCAwKSA6IDApO1xuICAgICAgLy8gaW52b2ljZSBpZCBmcm9tIG11bHRpcGxlIHBsYWNlc1xuICAgICAgY29uc3QgcGF5bWVudHNBcnIgPSBBcnJheS5pc0FycmF5KG8ucGF5bWVudHMpID8gby5wYXltZW50cyA6IFtdO1xuICAgICAgY29uc3QgcGF5bWVudDAgPSBwYXltZW50c0FyclswXSB8fCB7fTtcbiAgICAgIGNvbnN0IGludm9pY2VJZCA9XG4gICAgICAgIHBvLnVkZG9rdGFJbnZvaWNlSWQgfHxcbiAgICAgICAgby51ZGRva3RhSW52b2ljZUlkIHx8XG4gICAgICAgIHBheW1lbnQwLmludm9pY2VJZCB8fFxuICAgICAgICAoby5wYXltZW50ICYmIG8ucGF5bWVudC5pbnZvaWNlX2lkKSB8fFxuICAgICAgICAoby5tZXRhZGF0YSAmJiBvLm1ldGFkYXRhLmludm9pY2VfaWQpIHx8XG4gICAgICAgIG51bGw7XG4gICAgICAvLyB1ZGRva3RhIHN0YXR1c1xuICAgICAgY29uc3QgdWRkb2t0YVN0YXR1cyA9XG4gICAgICAgIG8udWRkb2t0YVN0YXR1cyB8fFxuICAgICAgICAodHlwZW9mIG8ucGF5bWVudFN0YXR1cyA9PT0gJ3N0cmluZycgPyBvLnBheW1lbnRTdGF0dXMudG9VcHBlckNhc2UoKSA6IG51bGwpIHx8XG4gICAgICAgIChwYXltZW50MC5zdGF0dXMgPyBTdHJpbmcocGF5bWVudDAuc3RhdHVzKS50b1VwcGVyQ2FzZSgpIDogbnVsbCkgfHxcbiAgICAgICAgKG8ucHJlT3JkZXJBZHZhbmNlUGFpZCA/ICdQQUlEJyA6ICdQRU5ESU5HJykgfHxcbiAgICAgICAgJ1BFTkRJTkcnO1xuICAgICAgY29uc3QgcGFpZCA9IChhZHZhbmNlUGFpZCA+IDApIHx8ICh1ZGRva3RhU3RhdHVzID09PSAnUEFJRCcgfHwgdWRkb2t0YVN0YXR1cyA9PT0gJ0NPTVBMRVRFRCcpO1xuICAgICAgLy8gbm9ybWFsaXplIGFkZHJlc3M6IG1heSBiZSBzdHJpbmcgb3Igb2JqZWN0XG4gICAgICBsZXQgYWRkcmVzcyA9IG51bGw7XG4gICAgICBpZiAoby5hZGRyZXNzICYmIHR5cGVvZiBvLmFkZHJlc3MgPT09ICdvYmplY3QnKSBhZGRyZXNzID0gby5hZGRyZXNzO1xuICAgICAgZWxzZSBpZiAoby5hZGRyZXNzICYmIHR5cGVvZiBvLmFkZHJlc3MgPT09ICdzdHJpbmcnKSBhZGRyZXNzID0geyBhZGRyZXNzOiBvLmFkZHJlc3MsIGNpdHk6IG8uY2l0eSB8fCBudWxsIH07XG4gICAgICBlbHNlIGFkZHJlc3MgPSB7IGFkZHJlc3M6IG8uYWRkcmVzcyB8fCBudWxsLCBjaXR5OiBvLmNpdHkgfHwgbnVsbCB9O1xuICAgICAgLy8gY3VzdG9tZXJcbiAgICAgIGNvbnN0IGN1c3RvbWVyID0gby5jdXN0b21lciB8fCB7XG4gICAgICAgIG5hbWU6IG8ubmFtZSB8fCBudWxsLFxuICAgICAgICBwaG9uZTogby5waG9uZSB8fCBudWxsLFxuICAgICAgICBlbWFpbDogby5lbWFpbCB8fCBudWxsLFxuICAgICAgICBhZGRyZXNzOiAodHlwZW9mIG8uYWRkcmVzcyA9PT0gJ3N0cmluZycpID8gby5hZGRyZXNzIDogdW5kZWZpbmVkLFxuICAgICAgICBjaXR5OiBvLmNpdHkgfHwgdW5kZWZpbmVkLFxuICAgICAgfTtcbiAgICAgIC8vIGl0ZW1zXG4gICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoby5pdGVtcykgPyBvLml0ZW1zLm1hcChpdCA9PiAoe1xuICAgICAgICBuYW1lOiBpdC5uYW1lIHx8IGl0LnRpdGxlIHx8IGl0LnNsdWcgfHwgJ+KAlCcsXG4gICAgICAgIHNsdWc6IGl0LnNsdWcgfHwgbnVsbCxcbiAgICAgICAgcXR5OiBOdW1iZXIoaXQucXR5IHx8IDApLFxuICAgICAgICBwcmljZTogTnVtYmVyKGl0LnByaWNlIHx8IDApLFxuICAgICAgfSkpIDogW107XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogU3RyaW5nKG8uX2lkKSxcbiAgICAgICAgY3JlYXRlZEF0OiBvLmNyZWF0ZWRBdCxcbiAgICAgICAgY3VzdG9tZXIsXG4gICAgICAgIGFkZHJlc3MsXG4gICAgICAgIGl0ZW1zLFxuICAgICAgICBpdGVtc0NvdW50OiBpdGVtcy5sZW5ndGgsXG4gICAgICAgIHN1YnRvdGFsOiBOdW1iZXIoby5zdWJ0b3RhbCB8fCAwKSxcbiAgICAgICAgZGVsaXZlcnlGZWU6IE51bWJlcihvLmRlbGl2ZXJ5RmVlIHx8IDApLFxuICAgICAgICB0b3RhbDogTnVtYmVyKG8udG90YWwgfHwgMCksXG4gICAgICAgIGFkdmFuY2VEdWU6IE51bWJlcihhZHZhbmNlRHVlIHx8IDApLFxuICAgICAgICBhZHZhbmNlUGFpZDogTnVtYmVyKGFkdmFuY2VQYWlkIHx8IDApLFxuICAgICAgICBkdWVPbkRlbGl2ZXJ5OiBOdW1iZXIoby5kdWVPbkRlbGl2ZXJ5IHx8IE1hdGgubWF4KDAsIE51bWJlcihvLnRvdGFsfHwwKSAtIE51bWJlcihhZHZhbmNlUGFpZHx8MCkpKSxcbiAgICAgICAgdmVyaWZpZWQ6IEJvb2xlYW4ocG8udmVyaWZpZWQgfHwgby5wcmVPcmRlckFkdmFuY2VQYWlkIHx8IHBhaWQpLFxuICAgICAgICBwYWlkLFxuICAgICAgICB1ZGRva3RhU3RhdHVzLFxuICAgICAgICBpbnZvaWNlSWQsXG4gICAgICAgIHByb3ZpZGVyOiBwYXltZW50MC5wcm92aWRlciB8fCBvLnBheW1lbnRQcm92aWRlciB8fCBudWxsLFxuICAgICAgICBwYXltZW50TWV0aG9kOiBvLnBheW1lbnRNZXRob2QgfHwgcGF5bWVudDAubWV0aG9kIHx8IG8ucGF5bWVudCB8fCBudWxsLFxuICAgICAgICB0cmFuc2FjdGlvbklkOiBvLnRyYW5zYWN0aW9uSWQgfHwgcGF5bWVudDAudHJhbnNhY3Rpb25faWQgfHwgbnVsbCxcbiAgICAgICAgY3VycmVudFN0YXR1czogby5jdXJyZW50U3RhdHVzIHx8IG8uc3RhdHVzIHx8IG51bGwsXG4gICAgICAgIHN0YXR1c0hpc3Rvcnk6IEFycmF5LmlzQXJyYXkoby5zdGF0dXNIaXN0b3J5KSA/IG8uc3RhdHVzSGlzdG9yeSA6IFtdLFxuICAgICAgICAuLi4oZGVidWcgPyB7IHJhdyB9IDoge30pLFxuICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBvazogdHJ1ZSwgb3JkZXJzOiBsaXN0IH0pO1xuICB9Y2F0Y2goZXJyKXtcbiAgICBjb25zb2xlLmVycm9yKCdhZG1pbiBwcmVvcmRlciBvcmRlcnMgR0VUIChzaW5nbGUpIGZhaWxlZCcsIGVycik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6ZmFsc2UsIGVycm9yOiBTdHJpbmcoZXJyPy5tZXNzYWdlIHx8IGVycikgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImR5bmFtaWMiLCJyZXZhbGlkYXRlIiwiZmV0Y2hDYWNoZSIsIk5leHRSZXNwb25zZSIsImRiQ29ubmVjdCIsImVuc3VyZURCIiwibG9hZE9yZGVyTW9kZWwiLCJtIiwiY2F0Y2giLCJkZWZhdWx0IiwiT3JkZXIiLCJsb2FkUHJvZHVjdE1vZGVsIiwiUHJvZHVjdCIsImZpbmRJbnZvaWNlSWQiLCJvIiwidHJ5VmFscyIsImludm9pY2VJZCIsInB1c2giLCJpbnZvaWNlX2lkIiwicGF5bWVudCIsInVkZG9rdGEiLCJtZXRhZGF0YSIsIkFycmF5IiwiaXNBcnJheSIsInBheW1lbnRzIiwicCIsInRyYW5zYWN0aW9ucyIsImZpbmQiLCJ2IiwidHJpbSIsImxlbmd0aCIsInZlcmlmeVVkZG9rdGEiLCJiYXNlIiwicHJvY2VzcyIsImVudiIsIlVERE9LVEFQQVlfQkFTRSIsImtleSIsIlVERE9LVEFQQVlfQVBJX0tFWSIsIlVERE9LVEFQQVlfU0FOREJPWF9BUElfS0VZIiwidXJsIiwicmVwbGFjZSIsInJlcyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJqIiwianNvbiIsImUiLCJkZXJpdmVQcm9kdWN0TWV0YSIsIml0IiwiaXRlbXMiLCJwcm9kdWN0VGl0bGUiLCJ0aXRsZSIsIm5hbWUiLCJzbHVnIiwicHJvZHVjdEltYWdlIiwiaW1hZ2UiLCJpbWFnZXMiLCJwcm9kdWN0SWQiLCJfaWQiLCJjb21wdXRlVG90YWxzIiwidG9OdW0iLCJuIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJjb2xsZWN0QW1vdW50c0RlZXAiLCJvYmoiLCJmb3VuZCIsInNlZW4iLCJTZXQiLCJ3YWxrIiwieCIsImhhcyIsImFkZCIsImsiLCJPYmplY3QiLCJlbnRyaWVzIiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIml0ZW1zU3VidG90YWwiLCJwcmljZSIsInVuaXRQcmljZSIsImFtb3VudCIsInF0eSIsInF1YW50aXR5IiwiZGVsaXZlcnkiLCJkZWxpdmVyeUZlZSIsInNoaXBwaW5nRmVlIiwiZGVsaXZlcnlDaGFyZ2UiLCJ0b3RhbCIsImdyYW5kVG90YWwiLCJwYWlkIiwidHhzIiwidCIsInJhdyIsInN0YXR1cyIsInN0YXRlIiwicGF5bWVudF9zdGF0dXMiLCJwYWlkX3N0YXR1cyIsInJlc3VsdCIsInRvU3RyaW5nIiwidG9VcHBlckNhc2UiLCJva1N0YXR1cyIsInN1Y2Nlc3MiLCJzdGF0dXNfY29kZSIsImNvZGUiLCJiYWRTdGF0dXMiLCJjYW5kaWRhdGVzIiwiY2hhcmdlZF9hbW91bnQiLCJwYWlkX2Ftb3VudCIsImFtb3VudF9jYXB0dXJlZCIsImNhcHR1cmVfYW1vdW50IiwiYWR2YW5jZSIsImFkdmFuY2VfcGFpZCIsImFkdmFuY2VBbW91bnQiLCJhZHZhbmNlX2Ftb3VudCIsInRyeF9hbW91bnQiLCJ0cmFuc2FjdGlvbl9hbW91bnQiLCJtYXAiLCJmaWx0ZXIiLCJnYXRld2F5X3Jlc3BvbnNlIiwibmVzdGVkIiwiZGVlcCIsInR5cGVTdHIiLCJ0eXBlIiwia2luZCIsIm5vdGUiLCJpc0FkdmFuY2UiLCJhbXQiLCJNYXRoIiwibWF4IiwidG9wcGVycyIsImFkdmFuY2VQYWlkIiwicHJlcGFpZCIsInByZXBhaWRBbW91bnQiLCJ0b3BBbXQiLCJkZWVwQWxsIiwiZHVlIiwiR0VUIiwicmVxIiwiVVJMIiwiZGVidWciLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJkb2NzIiwic29ydCIsImNyZWF0ZWRBdCIsImxlYW4iLCJsaXN0IiwicG8iLCJwcmVvcmRlciIsImFkdmFuY2VEdWUiLCJwcmVPcmRlckFkdmFuY2VBbW91bnQiLCJwcmVPcmRlckFkdmFuY2VQZXJjZW50Iiwicm91bmQiLCJwcmVPcmRlckFkdmFuY2VQYWlkIiwicGF5bWVudHNBcnIiLCJwYXltZW50MCIsInVkZG9rdGFJbnZvaWNlSWQiLCJ1ZGRva3RhU3RhdHVzIiwicGF5bWVudFN0YXR1cyIsImFkZHJlc3MiLCJjaXR5IiwiY3VzdG9tZXIiLCJwaG9uZSIsImVtYWlsIiwidW5kZWZpbmVkIiwiaWQiLCJpdGVtc0NvdW50Iiwic3VidG90YWwiLCJkdWVPbkRlbGl2ZXJ5IiwidmVyaWZpZWQiLCJCb29sZWFuIiwicHJvdmlkZXIiLCJwYXltZW50UHJvdmlkZXIiLCJwYXltZW50TWV0aG9kIiwidHJhbnNhY3Rpb25JZCIsInRyYW5zYWN0aW9uX2lkIiwiY3VycmVudFN0YXR1cyIsInN0YXR1c0hpc3RvcnkiLCJvcmRlcnMiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJtZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/preorder/orders/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dbConnect: () => (/* binding */ dbConnect)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nlet cached = global.mongooseConn;\nasync function dbConnect() {\n    if (cached && cached.readyState === 1) return cached;\n    const uri = process.env.MONGODB_URI;\n    if (!uri) throw new Error('Missing MONGODB_URI in env');\n    mongoose__WEBPACK_IMPORTED_MODULE_0___default().set('strictQuery', true);\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(uri, {\n        dbName: 'toyrush'\n    });\n    cached = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection);\n    return cached;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLElBQUlDLFNBQVNDLE9BQU9DLFlBQVk7QUFFekIsZUFBZUM7SUFDcEIsSUFBSUgsVUFBVUEsT0FBT0ksVUFBVSxLQUFLLEdBQUcsT0FBT0o7SUFDOUMsTUFBTUssTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0lBQ25DLElBQUksQ0FBQ0gsS0FBSyxNQUFNLElBQUlJLE1BQU07SUFDMUJWLG1EQUFZLENBQUMsZUFBZTtJQUM1QixNQUFNQSx1REFBZ0IsQ0FBQ00sS0FBSztRQUFFTyxRQUFRO0lBQVU7SUFDaERaLFNBQVNELDREQUFtQjtJQUM1QixPQUFPQztBQUNUIiwic291cmNlcyI6WyIvVXNlcnMvcm93c2hvbi9EZXNrdG9wL1RveVJ1c2hCRF9wcmVvcmRlcl92ZXJpZnlfcGF0Y2hfdjE1X2FkbWluX3ByZW9yZGVyX3VwZ3JhZGVzX3YxNS9saWIvZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZUNvbm47XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XG4gIGlmIChjYWNoZWQgJiYgY2FjaGVkLnJlYWR5U3RhdGUgPT09IDEpIHJldHVybiBjYWNoZWQ7XG4gIGNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xuICBpZiAoIXVyaSkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE1PTkdPREJfVVJJIGluIGVudicpO1xuICBtb25nb29zZS5zZXQoJ3N0cmljdFF1ZXJ5JywgdHJ1ZSk7XG4gIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QodXJpLCB7IGRiTmFtZTogJ3RveXJ1c2gnIH0pO1xuICBjYWNoZWQgPSBtb25nb29zZS5jb25uZWN0aW9uO1xuICByZXR1cm4gY2FjaGVkO1xufVxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiY2FjaGVkIiwiZ2xvYmFsIiwibW9uZ29vc2VDb25uIiwiZGJDb25uZWN0IiwicmVhZHlTdGF0ZSIsInVyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIkVycm9yIiwic2V0IiwiY29ubmVjdCIsImRiTmFtZSIsImNvbm5lY3Rpb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute&page=%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute.js&appDir=%2FUsers%2Frowshon%2FDesktop%2FToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frowshon%2FDesktop%2FToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute&page=%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute.js&appDir=%2FUsers%2Frowshon%2FDesktop%2FToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frowshon%2FDesktop%2FToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_rowshon_Desktop_ToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15_app_api_admin_preorder_orders_route_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/admin/preorder/orders/route.js */ \"(rsc)/./app/api/admin/preorder/orders/route.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/preorder/orders/route\",\n        pathname: \"/api/admin/preorder/orders\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/preorder/orders/route\"\n    },\n    distDir: \".next\" || 0,\n    projectDir:  false || '',\n    resolvedPagePath: \"/Users/rowshon/Desktop/ToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15/app/api/admin/preorder/orders/route.js\",\n    nextConfigOutput,\n    userland: _Users_rowshon_Desktop_ToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15_app_api_admin_preorder_orders_route_js__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/admin/preorder/orders/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = \"false\";\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                dynamicIO: Boolean(nextConfig.experimental.dynamicIO),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRnByZW9yZGVyJTJGb3JkZXJzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhZG1pbiUyRnByZW9yZGVyJTJGb3JkZXJzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWRtaW4lMkZwcmVvcmRlciUyRm9yZGVycyUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRnJvd3Nob24lMkZEZXNrdG9wJTJGVG95UnVzaEJEX3ByZW9yZGVyX3ZlcmlmeV9wYXRjaF92MTVfYWRtaW5fcHJlb3JkZXJfdXBncmFkZXNfdjE1JTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnJvd3Nob24lMkZEZXNrdG9wJTJGVG95UnVzaEJEX3ByZW9yZGVyX3ZlcmlmeV9wYXRjaF92MTVfYWRtaW5fcHJlb3JkZXJfdXBncmFkZXNfdjE1JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQ3dGO0FBQzFKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELGdCQUFnQixNQUF1QztBQUN2RDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjtBQUNuRjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUIsQ0FBQztBQUNOO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixPQUF3QztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvSkFBb0o7QUFDaEssOEJBQThCLDZGQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkZBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNEVBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLDhCQUE4Qiw2RUFBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEVBQWU7QUFDM0MsNEJBQTRCLDZFQUFnQjtBQUM1QyxvQkFBb0IseUdBQWtCLGtDQUFrQyxpSEFBc0I7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRkFBYztBQUMvRSwrREFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsRUFBRSxNQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCLHVDQUF1QyxRQUFRLEVBQUUsUUFBUTtBQUN6RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msb0JBQW9CO0FBQ25FO0FBQ0EseUJBQXlCLDZFQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msc0ZBQXlCO0FBQ2pFO0FBQ0Esb0NBQW9DLDRFQUFzQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNKQUFzSixvRUFBYztBQUNwSywwSUFBMEksb0VBQWM7QUFDeEo7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDZFQUFlO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSw4QkFBOEIsNkVBQVk7QUFDMUM7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QywyRkFBbUI7QUFDakU7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrRUFBUztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFJQUFxSSw2RUFBZTtBQUNwSjtBQUNBLDJHQUEyRyxpSEFBaUg7QUFDNU47QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCLDZFQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3RkFBMkI7QUFDdkQsa0JBQWtCLDZFQUFjO0FBQ2hDLCtCQUErQiw0RUFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsNENBQTRDLDZGQUFlO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcm93c2hvbi9EZXNrdG9wL1RveVJ1c2hCRF9wcmVvcmRlcl92ZXJpZnlfcGF0Y2hfdjE1X2FkbWluX3ByZW9yZGVyX3VwZ3JhZGVzX3YxNS9hcHAvYXBpL2FkbWluL3ByZW9yZGVyL29yZGVycy9yb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4vcHJlb3JkZXIvb3JkZXJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vcHJlb3JkZXIvb3JkZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hZG1pbi9wcmVvcmRlci9vcmRlcnMvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9yb3dzaG9uL0Rlc2t0b3AvVG95UnVzaEJEX3ByZW9yZGVyX3ZlcmlmeV9wYXRjaF92MTVfYWRtaW5fcHJlb3JkZXJfdXBncmFkZXNfdjE1L2FwcC9hcGkvYWRtaW4vcHJlb3JkZXIvb3JkZXJzL3JvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIHZhciBfbmV4dENvbmZpZ19leHBlcmltZW50YWw7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvYWRtaW4vcHJlb3JkZXIvb3JkZXJzL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGR5bmFtaWNJTzogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5keW5hbWljSU8pLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBpZiB3ZSBhcmVuJ3Qgd3JhcHBlZCBieSBiYXNlLXNlcnZlciBoYW5kbGUgaGVyZVxuICAgICAgICBpZiAoIWFjdGl2ZVNwYW4gJiYgIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute&page=%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute.js&appDir=%2FUsers%2Frowshon%2FDesktop%2FToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frowshon%2FDesktop%2FToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute&page=%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fpreorder%2Forders%2Froute.js&appDir=%2FUsers%2Frowshon%2FDesktop%2FToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frowshon%2FDesktop%2FToyRushBD_preorder_verify_patch_v15_admin_preorder_upgrades_v15&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();