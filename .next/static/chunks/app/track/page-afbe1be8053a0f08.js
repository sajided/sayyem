(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4589],{1469:(e,a,r)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var r in a)Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}(a,{default:function(){return c},getImageProps:function(){return d}});let t=r(8229),s=r(8883),l=r(3063),i=t._(r(1193));function d(e){let{props:a}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(a))void 0===r&&delete a[e];return{props:a}}let c=l.Image},4571:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>n});var t=r(5155),s=r(2115);r(6766);var l=r(6874),i=r.n(l);function d(e){let{active:a,onClick:r,children:s}=e;return(0,t.jsx)("button",{onClick:r,className:"px-3 py-2 rounded-lg text-sm "+(a?"bg-black text-white dark:bg-white dark:text-black":"hover:bg-black/5 dark:hover:bg-white/5 border border-transparent"),children:s})}function c(e){var a,r,s,l;let{o:i}=e;return(0,t.jsxs)("div",{className:"rounded-2xl border border-black/10 p-4 shadow-sm bg-black/[0.04] dark:border-white/10 dark:bg-white/[0.04]",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[11px] opacity-70",children:i.createdAt?new Date(i.createdAt).toLocaleString():""}),(0,t.jsx)("div",{className:"font-mono text-[11px]",children:i.id})]}),(0,t.jsx)("span",{className:"rounded-full border border-black/10 px-2 py-0.5 text-xs dark:border-white/10",children:(i.status||"").replaceAll("_"," ")||"—"})]}),(0,t.jsxs)("div",{className:"mt-3 grid gap-3 text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:"preorder"===i.type?i.productTitle||(null==(r=i.items)||null==(a=r[0])?void 0:a.title)||"Preorder":i.name}),(0,t.jsx)("div",{className:"opacity-70 text-xs",children:i.city?i.city:null}),(0,t.jsx)("div",{className:"flex items-start gap-3",children:(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[Array.isArray(i.items)&&i.items.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"relative h-12 w-12 overflow-hidden rounded-lg border border-black/10 dark:border-white/10",children:e.image?(0,t.jsx)("img",{src:e.image,alt:e.title||"Item",className:"h-full w-full object-cover"}):(0,t.jsx)("div",{className:"h-full w-full grid place-items-center text-xs opacity-50",children:"No image"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"font-medium line-clamp-2",children:e.title||"—"}),e.slug&&(0,t.jsx)("div",{className:"text-[11px] opacity-70",children:e.slug})]})]}),(0,t.jsxs)("div",{className:"text-right text-sm whitespace-nowrap",children:["\xd7 ",e.qty]})]},a)),(!Array.isArray(i.items)||0===i.items.length)&&"preorder"===i.type&&(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"relative h-12 w-12 overflow-hidden rounded-lg border border-black/10 dark:border-white/10",children:i.productImage?(0,t.jsx)("img",{src:i.productImage,alt:i.productTitle||"Item",className:"h-full w-full object-cover"}):(0,t.jsx)("div",{className:"h-full w-full grid place-items-center text-xs opacity-50",children:"No image"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"font-medium line-clamp-2",children:i.productTitle||"—"}),i.slug&&(0,t.jsx)("div",{className:"text-[11px] opacity-70",children:i.slug})]})]}),(0,t.jsxs)("div",{className:"text-right text-sm whitespace-nowrap",children:["\xd7 ",(null==(l=i.items)||null==(s=l[0])?void 0:s.qty)||i.qty||1]})]})]})}),"preorder"===i.type&&i.slug&&(0,t.jsx)("div",{className:"mt-2 text-xs",children:(0,t.jsx)("a",{href:"/product/".concat(i.slug),className:"underline",children:"View product page"})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 items-center gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"truncate",children:[(0,t.jsx)("span",{className:"opacity-70",children:"Total:"})," ৳",i.total]}),(0,t.jsxs)("div",{className:"truncate text-emerald-600 dark:text-emerald-400 text-xs",children:[(0,t.jsx)("span",{className:"opacity-70",children:"Paid:"})," ৳",i.paid]}),(0,t.jsxs)("div",{className:"truncate text-xs opacity-70",children:[(0,t.jsx)("span",{className:"",children:"Due:"})," ৳",i.due]})]})]})]})}function n(){let[e,a]=(0,s.useState)("regular"),[r,l]=(0,s.useState)(""),[n,o]=(0,s.useState)(""),[m,x]=(0,s.useState)(!1),[h,u]=(0,s.useState)([]),[p,b]=(0,s.useState)([]),[g,j]=(0,s.useState)("");async function f(){x(!0),j("");try{let e=await fetch("/api/track/regular",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:r})}),a=await e.json();if(!a.ok)throw Error(a.error||"Request failed");u(a.data||[]),0===(a.data||[]).length&&j("No regular orders found.")}catch(e){j(e.message)}finally{x(!1)}}async function v(){x(!0),j("");try{let e=await fetch("/api/track/preorder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:n})}),a=await e.json();if(!a.ok)throw Error(a.error||"Request failed");b(a.data||[]),0===(a.data||[]).length&&j("No pre‑orders found.")}catch(e){j(e.message)}finally{x(!1)}}return(0,t.jsxs)("div",{className:"mx-auto max-w-4xl p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Track your order"}),(0,t.jsxs)("div",{className:"mt-4 rounded-xl border border-black/10 p-1 inline-flex dark:border-white/10",children:[(0,t.jsx)(d,{active:"regular"===e,onClick:()=>a("regular"),children:"Regular Order"}),(0,t.jsx)(d,{active:"preorder"===e,onClick:()=>a("preorder"),children:"Pre‑order"})]}),"regular"===e&&(0,t.jsxs)("section",{className:"mt-6 rounded-xl border border-black/10 p-4 text-sm dark:border-white/10",children:[(0,t.jsx)("label",{className:"text-xs",children:"Phone number"}),(0,t.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,t.jsx)("input",{value:r,onChange:e=>l(e.target.value),placeholder:"01XXXXXXXXX or +8801XXXXXXXXX",className:"flex-1 rounded-xl border border-black/10 px-3 py-2 dark:border-white/10 dark:bg-black/60"}),(0,t.jsx)("button",{onClick:f,disabled:m,className:"rounded-xl bg-black px-4 py-2 text-white hover:opacity-90 disabled:opacity-50 dark:bg-white dark:text-black",children:m?"Searching...":"Search"})]}),(0,t.jsx)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:h.map(e=>(0,t.jsx)(c,{o:e},e.id))}),g&&(0,t.jsx)("div",{className:"mt-3 text-sm opacity-70",children:g})]}),"preorder"===e&&(0,t.jsxs)("section",{className:"mt-6 rounded-xl border border-black/10 p-4 text-sm dark:border-white/10",children:[(0,t.jsx)("label",{className:"text-xs",children:"Phone number"}),(0,t.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,t.jsx)("input",{value:n,onChange:e=>o(e.target.value),placeholder:"01XXXXXXXXX or +8801XXXXXXXXX",className:"flex-1 rounded-xl border border-black/10 px-3 py-2 dark:border-white/10 dark:bg-black/60"}),(0,t.jsx)("button",{onClick:v,disabled:m,className:"rounded-xl bg-black px-4 py-2 text-white hover:opacity-90 disabled:opacity-50 dark:bg-white dark:text-black",children:m?"Searching...":"Search"})]}),(0,t.jsx)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:p.map(e=>(0,t.jsx)(c,{o:e},e.id))}),g&&(0,t.jsx)("div",{className:"mt-3 text-sm opacity-70",children:g})]}),(0,t.jsxs)("div",{className:"mt-6 text-sm opacity-70",children:["Having trouble? ",(0,t.jsx)(i(),{href:"/contact",className:"underline",children:"Contact support"})]})]})}},6157:(e,a,r)=>{Promise.resolve().then(r.bind(r,4571))},6766:(e,a,r)=>{"use strict";r.d(a,{default:()=>s.a});var t=r(1469),s=r.n(t)}},e=>{e.O(0,[6874,3063,8441,5964,7358],()=>e(e.s=6157)),_N_E=e.O()}]);