(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2116],{2288:(e,a,r)=>{Promise.resolve().then(r.bind(r,8542))},5695:(e,a,r)=>{"use strict";var t=r(8999);r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},8542:(e,a,r)=>{"use strict";r.d(a,{default:()=>n});var t=r(5155),s=r(2115),d=r(5695);function n(e){let{next:a="/admin/preorder"}=e,[r,n]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[c,o]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[x,b]=(0,s.useState)(""),[m,p]=(0,s.useState)(!1),[g,k]=(0,s.useState)(""),N=(0,d.useRouter)();async function j(){try{let e=await fetch("/api/admin/auth/captcha",{cache:"no-store"}),a=await e.json();o(a.question||""),h(a.captchaToken||""),b("")}catch(e){}}async function f(e){e.preventDefault(),p(!0),k("");try{let e=await fetch("/api/admin/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:i,captchaAnswer:x,captchaToken:u})}),t=await e.json().catch(()=>({}));if(!e.ok){k(t.error||"Login failed"),await j();return}N.push(a||"/admin/preorder")}catch(e){k("Login error")}finally{p(!1)}}return(0,s.useEffect)(()=>{j()},[]),(0,t.jsx)("div",{className:"mx-auto max-w-md py-16",children:(0,t.jsxs)("div",{className:"rounded-2xl border border-black/10 p-6 shadow-sm dark:border-white/10",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Admin Login"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:"Sign in to access the admin panel."}),(0,t.jsxs)("form",{onSubmit:f,className:"mt-6 grid gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsx)("label",{className:"text-xs",children:"Username"}),(0,t.jsx)("input",{value:r,onChange:e=>n(e.target.value),required:!0,className:"rounded-xl border border-black/10 px-3 py-2 dark:border-white/10 dark:bg-black/60"})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsx)("label",{className:"text-xs",children:"Password"}),(0,t.jsx)("input",{type:"password",value:i,onChange:e=>l(e.target.value),required:!0,className:"rounded-xl border border-black/10 px-3 py-2 dark:border-white/10 dark:bg-black/60"})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsx)("label",{className:"text-xs",children:"Captcha"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"rounded-lg bg-neutral-100 px-3 py-2 text-sm dark:bg-neutral-800",children:c||"Loading…"}),(0,t.jsx)("button",{type:"button",onClick:j,className:"rounded-lg border border-black/10 px-2 py-1 text-xs hover:bg-black/5 dark:border-white/10 dark:hover:bg-white/10",children:"Refresh"})]}),(0,t.jsx)("input",{value:x,onChange:e=>b(e.target.value),required:!0,placeholder:"Answer",className:"mt-1 rounded-xl border border-black/10 px-3 py-2 dark:border-white/10 dark:bg-black/60"})]}),g&&(0,t.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-2 text-sm text-red-700 dark:border-red-900/50 dark:bg-red-950/40 dark:text-red-300",children:g}),(0,t.jsx)("button",{disabled:m,className:"rounded-xl border border-black/10 bg-black px-4 py-2 font-medium text-white disabled:opacity-60 dark:border-white/10 dark:bg-white dark:text-black",children:m?"Signing in…":"Sign in"})]}),(0,t.jsxs)("p",{className:"mt-4 text-xs text-neutral-500",children:["Default creds (dev): admin / admin123 — set ",(0,t.jsx)("code",{children:"ADMIN_USERNAME"}),", ",(0,t.jsx)("code",{children:"ADMIN_PASSWORD"})," and ",(0,t.jsx)("code",{children:"AUTH_SECRET"})," in your env."]})]})})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=2288)),_N_E=e.O()}]);